
apply plugin: 'kotlin'


compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

sourceSets {
    test.java.srcDirs += 'src/test/kotlin'

    slowTest {
        kotlin {
            compileClasspath += main.output + test.output
            runtimeClasspath += main.output + test.output
            srcDir file('src/slowTest/kotlin')
        }
    }
}

afterEvaluate {
    compileJava.dependsOn.remove(project.tasks.compileKotlin)

    dependencies {
        testCompile "org.jetbrains.kotlin:kotlin-stdlib:${System.getProperty('kotlinVersion')}",
                "org.jetbrains.kotlin:kotlin-reflect:${System.getProperty('kotlinVersion')}",
                "org.jetbrains.kotlin:kotlin-stdlib-jdk8:${System.getProperty('kotlinVersion')}"
    }
}
